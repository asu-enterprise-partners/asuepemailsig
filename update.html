<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ASUEP email signature generator</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f9f9f9;
      }

      .content-wrapper {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        gap: 40px;
        padding: 40px;
        box-sizing: border-box;
      }

      .form-section,
      .preview-section {
        flex: 1 1 50%;
        min-width: 0;
      }

      input,
      textarea,
      select {
        width: 100%;
        margin: 6px 0 14px;
        padding: 8px;
        font-size: 14px;
      }
      label {
        font-weight: bold;
      }
      .signature-preview {
        background: #fff;
        /* padding: 20px; */
        line-height: 0.8rem;
        /* border: 1px solid #ccc; */
        /* white-space: pre-wrap; */
      }
      .highlight {
        background: #ffc620;
        font-weight: bold;
      }
      .output-html {
        margin-top: 20px;
        font-size: 14px;
        background: #eaeaea;
        padding: 10px;
        white-space: pre-wrap;
        border: 1px dashed #666;
      }
      .copy-btn {
        margin: 10px 10px 10px 0;
        padding: 8px 16px;
        cursor: pointer;
      }
      .title-group {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      @media (max-width: 768px) {
        .content-wrapper {
          flex-direction: column;
          gap: 20px;
          padding: 20px;
        }

        .form-section,
        .preview-section {
          flex: 1 1 100%;
          min-width: 100%;
        }

        h2 {
          font-size: 18px;
        }

        input,
        textarea,
        select {
          font-size: 16px;
          padding: 10px;
        }

        .copy-btn {
          width: 100%;
          font-size: 16px;
          padding: 12px;
        }

        .signature-preview,
        .output-html {
          word-break: break-word;
          overflow-wrap: anywhere;
          overflow-x: auto;
          font-size: 14px;
        }

        .title-group {
          flex-direction: column;
          align-items: stretch;
        }

        .title-group button {
          width: 100%;
          margin-top: 5px;
        }
      }

      .page-header {
        width: 100%;
        padding: 20px 40px;
        box-sizing: border-box;
      }

      .page-header h1 {
        margin: 0;
        font-size: 26px;
        /* color: #8c1d40; */
        font-weight: bold;
        font-family: Arial, sans-serif;
      }

      /* Mobile adjustments */
      @media (max-width: 768px) {
        .page-header {
          padding: 16px 20px;
        }

        .page-header h1 {
          font-size: 22px;
          /* text-align: center; */
        }
      }
    </style>
  </head>
  <body>
    <header class="page-header">
      <img
        width="200px"
        alt="ASU Logo"
        src="./sigfiles/asu_enterpartners_horiz_rgb_maroongold_150ppi_0.png"
      />
      <h1>
        <span style="background-color: #ffc627; padding: 4px"
          >ASU EP Email Signature Generator</span
        >
      </h1>
    </header>

    <div class="content-wrapper">
      <div class="form-section">
        <h2><span class="highlight">Enter contact details below</span></h2>
        <label>Full Name</label>
        <input type="text" id="fullName" placeholder="Mister Sparky" />

        <label>Title(s)</label>
        <div id="titlesContainer">
          <div class="title-group">
            <input type="text" class="titleInput" />
            <button onclick="addTitle()">+</button>
          </div>
        </div>

        <label>Department</label>
        <input type="text" id="department" />

        <label>Organization</label>
        <select id="organization">
          <option value="ASU Enterprise Partners">
            ASU Enterprise Partners
          </option>
          <option value="ASU Foundation">ASU Foundation</option>
          <option value="ASURE">ASURE</option>
          <option value="ECASU">ECASU</option>
          <option value="Skysong Innovations">Skysong Innovations</option>
          <option
            value="University Realty<br /><span style='font-weight: 100 !important;'>Advancing the Arizona State University Knowledge Enterprise<br /><em>An Affiliate of the ASU Foundation for A New American University</em></optionspan>"
          >
            University Realty
          </option>
          <option value="ASU Foundation for A New American University">
            ASU Foundation for A New American University
          </option>
          <option value="RealmSpark">RealmSpark</option>
          <option value="Milo Space Science Institute">
            Milo Space Science Institute
          </option>
          <option value="ASU Outreach Hub">ASU Outreach Hub</option>
          <option value="Arizona State University">
            Arizona State University
          </option>
        </select>

        <label>Office phone</label>
        <input type="text" id="officePhone" />

        <label>Mobile phone</label>
        <input type="text" id="mobilePhone" />

        <label>Fax</label>
        <input type="text" id="fax" />

        <label>Email address</label>
        <input type="text" id="email" placeholder="sparky@asuep.org" />

        <label>Website</label>
        <select id="website">
          <option value="asuchangingfutures.org">asuchangingfutures.org</option>
          <option value="asuenterprisepartners.org">
            asuenterprisepartners.org
          </option>
          <option value="asufoundation.org">asufoundation.org</option>
          <option value="asure.asu.edu">asure.asu.edu</option>
          <option value="investu.org">investu.org</option>
          <option value="scaleu.org">scaleu.org</option>
          <option value="skysonginnovations.com">skysonginnovations.com</option>
          <option value="universityrealtyllc.org">
            universityrealtyllc.org
          </option>
          <option value="asu.edu">asu.edu</option>
        </select>

        <label>Mailing address</label>
        <input type="text" id="addr1" placeholder="PO Box 2260" />
        <input type="text" id="addr2" placeholder="Tempe, AZ" />
        <input type="text" id="addr3" placeholder="85280-2260" />

        <label>Slogan (will be highlighted in gold)</label>
        <input
          type="text"
          id="slogan"
          placeholder="Changing Futures: From Arizona. For the world."
        />

        <label>Optional custom statement</label>
        <textarea id="custom" rows="2"></textarea>
      </div>

      <div class="preview-section">
        <h2><span class="highlight">Your live signature preview</span></h2>
        <div class="signature-preview" id="signatureOutput"></div>
        <button class="copy-btn" onclick="copySignatureHTML()">
          Copy signature preview to clipboard
        </button>
        <!-- <button class="copy-btn" onclick="copyHTML()">Copy HTML</button> -->
        <!-- <div class="output-html" id="htmlOutput"></div> -->
      </div>
    </div>

    <script>
      const inputs = document.querySelectorAll("input, textarea, select");
      inputs.forEach((input) =>
        input.addEventListener("input", updateSignature)
      );

      function addTitle() {
        const container = document.getElementById("titlesContainer");
        const div = document.createElement("div");
        div.className = "title-group";
        div.innerHTML =
          '<input type="text" class="titleInput"><button onclick="this.parentNode.remove(); updateSignature();">â€“</button>';
        container.appendChild(div);
        div.querySelector("input").addEventListener("input", updateSignature);
      }

      function updateSignature() {
        const fullName =
          document.getElementById("fullName").value || "Mister Sparky";
        const titles = [...document.querySelectorAll(".titleInput")]
          .map((el) => el.value)
          .filter(Boolean)
          .join("<br>");
        const department = document.getElementById("department").value;
        const organization = document.getElementById("organization").value;
        const officePhone = document.getElementById("officePhone").value;
        const mobilePhone = document.getElementById("mobilePhone").value;
        const fax = document.getElementById("fax").value;
        const email =
          document.getElementById("email").value || "sparky@asuep.org";
        const website = document.getElementById("website").value;
        const addr1 = document.getElementById("addr1").value || "PO Box 2260";
        const addr2 = document.getElementById("addr2").value || "Tempe, AZ";
        const addr3 = document.getElementById("addr3").value || "85280-2260";
        const slogan =
          document.getElementById("slogan").value ||
          "Changing Futures: From Arizona. For the world.";
        const custom = document.getElementById("custom").value;

        const brandColor = "#8c1d40";

        const html = `
<b style="font-size:8pt; line-height: .8rem;">${fullName}</b><br>
<span style="font-size:8pt; line-height: .8rem;">${titles}</span><br>
<span style="font-size:8pt; line-height: .8rem;">${department}</span><br>
<b style="font-size:8pt; line-height: .8rem;">${organization}</b><br>
${
  officePhone
    ? `<b style="font-size:8pt; line-height: .8rem;">o:</b> <a href="tel:${officePhone}" style="color: ${brandColor}; font-size:8pt; line-height: .8rem;">${officePhone}</a>&nbsp;`
    : ""
}
${
  mobilePhone
    ? `<b style="font-size:8pt; line-height: .8rem;">c:</b> <a href="tel:${mobilePhone}" style="color: ${brandColor}; font-size:8pt; line-height: .8rem;">${mobilePhone}</a>&nbsp;`
    : ""
}
${
  fax
    ? `<b style="font-size:8pt; line-height: .8rem;">f:</b> <a href="tel:${fax}" style="color: ${brandColor}; font-size:8pt; line-height: .8rem;">${fax}</a><br />`
    : ""
}
<b style="font-size:8pt; line-height: .8rem;">email:</b> <a href="mailto:${email}" style="color:${brandColor}; font-size:8pt; line-height: .8rem;"">${email}</a><br>
<b style="font-size:8pt; line-height: .8rem;">website:</b> <a href="https://${website}" style="color:${brandColor}; font-size:8pt; line-height: .8rem;"">${website}</a><br>
<span style="font-size:8pt; line-height: .8rem;">${addr1} | ${addr2} | ${addr3}</span><br>
<span class="highlight" style="font-size:8pt; line-height: .8rem;">${slogan}</span><br>
<span style="font-size:8pt; line-height: .8rem;">${custom}</span>
    `.trim();

        document.getElementById("signatureOutput").innerHTML = html;
        // console.log(html);

        // document.getElementById("htmlOutput").textContent = html;
      }

      function copyHTML() {
        // const html = document.getElementById("htmlOutput").textContent;
        navigator.clipboard.writeText(html).then(() => {
          alert("Signature HTML copied to clipboard!");
        });
      }

      // Init preview
      updateSignature();

      function copySignatureHTML() {
        const signature = document.getElementById("signatureOutput");
        // console.log(signature);
        const range = document.createRange();
        range.selectNode(signature);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);

        try {
          const success = document.execCommand("copy");
          if (success)
            alert("Your signature has been copied to the clipboard!");
          else alert("Copy failed. Please try manually.");
        } catch (err) {
          alert("Error copying signature.");
        }
        selection.removeAllRanges();
        console.log(signature);
      }
    </script>
  </body>
</html>
